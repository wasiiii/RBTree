# RBTree
### 总结
- 插入：
1. 插入的节点都为红色
2. 没有根节点，连到root
3. 其他情况插入后，重平衡
- 插入重平衡
1. 根节点，调为黑色即可
2. 插入结点的父节点为黑色，不需要重平衡
3. 插入节点的父节点为红色
3.1. 插入节点的父节点为左节点（确定叔叔节点）
3.1.1. 插入结点为左节点
3.1.1.1. 插入节点的叔叔结点为黑色：①父节点更新为黑色；②祖父节点更新为红色；③右旋祖父节点
3.1.1.2. 插入节点的叔叔节点为红色：①父节点更新为黑色；②叔叔节点更新为黑色；③祖父节点更新为红色，且更新为当前节点
3.1.2. 插入节点为右节点：①左旋父节点；②父节点更新为当前节点
3.2. 插入节点的父节点为右节点（确定叔叔节点）
3.2.1. 插入结点为左节点：①右旋父节点；②父节点更新为当前节点
3.2.2. 插入节点为右节点
3.2.2.1. 插入节点的叔叔节点为黑色：①父节点更新为黑色；②祖父节点更新为红色；③左旋祖父节点
3.2.2.2. 插入节点的叔叔节点为红色：①父节点更新为黑色；②叔叔节点更新为黑色；③祖父节点更新为红色，且更新为当前节点

- 删除：和AVL类似
1. 删除节点为根节点
1.1. 删除节点为叶子节点：直接删除
1.2. 删除节点有右节点：右节点更新为根节点，且更新为黑色
1.3. 删除节点有左节点：左节点更新为根节点，且更新为黑色
1.4. 删除节点有左右节点：找后继节点，找到后递归寻找，把后继节点更新为删除节点，继续判断
2. 删除节点为左节点
2.1. 删除节点为叶子节点
2.1.1. 删除节点为红色：直接删除
2.1.2. 删除节点为黑色：删除重平衡
2.2. 删除节点只有右节点（必定为红色）：右节点替换删除节点，且更新为黑色
2.3. 删除节点只有左节点（必定为红色）：左节点替换删除节点，且更新为黑色
2.4. 删除节点有左右节点：找后继节点，找到后递归寻找，把后继节点更新为删除节点，继续判断
3. 删除节点为右节点
3.1. 删除节点为叶子节点
3.1.1. 删除节点为红色：直接删除
3.1.2. 删除节点为黑色：删除重平衡
3.2. 删除节点只有右节点（必定为红色）：右节点替换删除节点，且更新为黑色
3.3. 删除节点只有左节点（必定为红色）：左节点替换删除节点，且更新为黑色
3.4. 删除节点有左右节点：找后继节点，找到后递归寻找，把后继节点更新为删除节点，继续判断

- 删除重平衡：
1. 当前节点为根节点
2. 当前节点为红色
3. 当前节点为黑色
3.1. 当前节点为左节点（确定兄弟节点）
3.1.1. 兄弟节点为黑色
3.1.1.1. 兄弟节点只有右节点（必定为红色）：①兄弟节点更新为父节点的颜色；②兄弟节点的右节点更新为黑色；③父节点更新为黑色；④左旋父节点
3.1.1.2. 兄弟节点只有左节点（必定为红色）：①兄弟节点更新为红色；②兄弟节点的左节点更新为黑色；③右旋兄弟节点
3.1.1.3. 兄弟节点有左右节点（必定为红色）：和3.1.1.1相同
3.1.1.4. 兄弟节点为叶子节点：兄弟节点更新为红色，当前结点更新为父节点（为了找到一个红色节点跳出循环，将红色节点更新为黑色即可保持黑色节点数量）
3.1.2. 兄弟节点为红色（必定有左右黑色子节点，父节点必定为黑色）：①兄弟节点更新为黑色；②兄弟节点的左节点更新为红色；③左旋父节点
3.2. 当前节点为右节点（确定兄弟节点）
3.2.1. 兄弟节点为黑色
3.2.1.1. 兄弟节点只有右节点（必定为红色）：①兄弟节点更新为红色；②兄弟节点的右节点更新为黑色；③右旋兄弟节点
3.2.1.2. 兄弟节点只有左节点（必定为红色）：①兄弟节点更新为父节点的颜色；②兄弟节点的左节点更新为黑色；③父节点更新为黑色；④右旋父节点
3.2.1.3. 兄弟节点有左右节点（必定为红色）：和3.2.1.3相同
3.2.1.4. 兄弟节点为叶子节点：兄弟节点更新为红色，当前结点更新为父节点（为了找到一个红色节点跳出循环，将红色节点更新为黑色即可保持黑色节点数量）
3.2.2. 兄弟节点为红色（必定有左右黑色子节点，父节点必定为黑色）：①兄弟节点更新为黑色；②兄弟节点的右节点更新为红色；③右旋父节点

- 左旋右旋步骤和AVL相同，但是要注意parent的更新和root的情况